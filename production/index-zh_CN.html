<!DOCTYPE html>
<html>
<head>
  <meta http-equiv="Content-Type" content="text/html; charset=utf-8">
  <title>巴利语字典</title>
  <meta name="keywords" content="Pāli, Pali, Pāli dictionary, Pali dictionary, Pāli-Chinese, Pāli-English, Pāli-Japanese,字典,辭典,巴利,巴利文,巴利語,巴利語字典,巴漢字典,巴英字典,巴日字典" />
  <meta name="description" content="Pāli dictionary (Pāli to Chinese, Pāli to English, Pāli to Japanese).巴利語字典,巴漢字典,巴英字典,巴日字典" /> 
  <script type="text/javascript">
/* Reference: http://ntt.cc/2008/02/10/4-ways-to-dynamically-load-external-javascriptwith-source.html */
function AJAXLoad(type, loadByXMLHttp, url){
  var ext;
  if (type == "js") {
    ext = document.createElement('script');
    ext.setAttribute("type","text/javascript");
  }
  if (type == "css") {
    ext = document.createElement('link');
    ext.setAttribute("type", "text/css");
    ext.setAttribute("rel", "stylesheet");
  }
  if (!loadByXMLHttp) {
    if (type == "js") {
      ext.setAttribute("src", url);
      if (typeof ext != "undefined") {document.getElementsByTagName("head")[0].appendChild(ext);}
    }
    if (type == "css") {
      ext.setAttribute("href", url);
      if (typeof ext != "undefined") {document.getElementsByTagName("head")[0].appendChild(ext);}
    }
    return;
  }
  var xmlhttp;
  if (window.XMLHttpRequest) {xmlhttp=new XMLHttpRequest();}
  else {xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");}
  xmlhttp.onreadystatechange=function(){
    if (xmlhttp.readyState==4) {
      if (xmlhttp.status == 200) {
        ext.innerHTML=xmlhttp.responseText;
        document.getElementsByTagName("head")[0].appendChild(ext);
      } else {
        console.log('cannot load external file :'+url);
      }
    }
  }
  xmlhttp.open("GET",url,true);
  xmlhttp.send();
}
AJAXLoad("js", false, "http://pali.googlecode.com/git/static/jsvarindex.js");
AJAXLoad("css", false, "http://fonts.googleapis.com/css?family=Gentium+Basic|Special+Elite&subset=latin,latin-ext");
AJAXLoad("css", false, "http://pali.googlecode.com/git/templates/css/palidict.css");
  </script>
  <link href="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/themes/base/jquery-ui.css" rel="stylesheet" type="text/css"/>
  <script src="http://ajax.googleapis.com/ajax/libs/jquery/1.5/jquery.min.js"></script>
  <script src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8/jquery-ui.min.js"></script>

  <script type="text/javascript">$(document).ready(function() {
  <!-- make keypad draggable -->
  $("#keyboard").draggable();

  <!-- bind the click function of input element inside keypad -->
  $("#keyboard input").bind("click", function(e) {
    document.getElementById("PaliInput").value += this.value;
    document.getElementById("PaliInput").focus();
    strMatch();
  });
});


//<!-- make keypad show if hidden, hide if shown -->
function toggle() {
  var kb = document.getElementById("keyboard");
  var dt = document.getElementById("displayText");
  if(kb.style.display == "inline") {
    kb.style.display = "none";
    dt.innerHTML = '显示巴利语键盘';
  }
  else {
    kb.style.display = "inline";
    dt.innerHTML = '隐藏巴利语键盘';
    kb.style.left = getOffset(dt).left +"px";
  }
}

// http://www.web-code.org/coding-tools/javascript-escape-unescape-converter-tool.html
function showAbout(){document.getElementById("result").innerHTML = document.getElementById("about").innerHTML;}
function showLink(){document.getElementById("result").innerHTML = document.getElementById("link").innerHTML;}

function lookup() {
var xmlhttp;
if (window.XMLHttpRequest)
  {// code for IE7+, Firefox, Chrome, Opera, Safari
  xmlhttp=new XMLHttpRequest();
  }
else
  {// code for IE6, IE5
  xmlhttp=new ActiveXObject("Microsoft.XMLHTTP");
  }
xmlhttp.onreadystatechange=function()
  {
  if (xmlhttp.readyState==4 && xmlhttp.status==200)
    {
    //document.getElementById('').innerHTML=xmlhttp.status;
    //document.getElementById('').innerHTML=xmlhttp.statusText;
    document.getElementById('result').innerHTML=xmlhttp.responseText;
    }
  }
document.getElementById('result').innerHTML='查询中...';
xmlhttp.open("POST","/lookup",true);
xmlhttp.setRequestHeader("Content-type","application/x-www-form-urlencoded");
xmlhttp.send("word=" + encodeURI(document.getElementById('PaliInput').value));
}

// Dynamically retrieve Html element (X,Y) position with JavaScript
// http://stackoverflow.com/questions/442404/dynamically-retrieve-html-element-x-y-position-with-javascript
function getOffset( el ) {
  var _x = 0;
  var _y = 0;
  while( el && !isNaN( el.offsetLeft ) && !isNaN( el.offsetTop ) ) {
    _x += el.offsetLeft - el.scrollLeft;
    _y += el.offsetTop - el.scrollTop;
    el = el.offsetParent;
  }
  return { top: _y, left: _x };
}

// hide popup div when clicking outside the div
// http://www.webdeveloper.com/forum/showthread.php?t=98973
document.onclick = check;
// Event accessing
// http://www.quirksmode.org/js/events_access.html
// Event properties
// http://www.quirksmode.org/js/events_properties.html
function check(e){
  var target = (e && e.target) || (event && event.srcElement); 
  var langDropdownMenuDiv = document.getElementById("menuDiv-lang-dropdown"); 
  var langDropdown = document.getElementById("lang-dropdown"); 

  if (!checkParent(target, "menuDiv-lang-dropdown")) {
    if (checkParent(target, "lang-dropdown")) {
      if (langDropdownMenuDiv.style.display == "none") {
        langDropdownMenuDiv.style.left = getOffset(langDropdown).left +"px";
        langDropdownMenuDiv.style.display = "";
      } else {langDropdownMenuDiv.style.display = "none";}
    } else {
      langDropdownMenuDiv.style.display = "none";
    }
  }
}
function checkParent(t,id) {
  while(t.parentNode) { 
    if( t == document.getElementById(id) ) {return true;} 
    t = t.parentNode;
  } 
  return false;
}</script>
  <script type="text/javascript">var prefix_code = {
//  "°" : "uc",
//  "-" : "dash",
  "a" : "a",
  "ā" : "aa",
  "b" : "b",
  "c" : "c",
  "d" : "d",
  "ḍ" : "dotd",
  "e" : "e",
  "g" : "g",
  "h" : "h",
  "i" : "i",
  "ī" : "ii",
  "j" : "j",
  "k" : "k",
  "l" : "l",
  "ḷ" : "dotl",
  "m" : "m",
//  "ṃ" : "dotm",
  "n" : "n",
  "ñ" : "tilden",
//  "ṇ" : "dotn",
//  "ṅ" : "ndot",
//  "ŋ" : "ngng",
  "o" : "o",
  "p" : "p",
  "r" : "r",
  "s" : "s",
  "t" : "t",
  "ṭ" : "dott",
  "u" : "u",
  "ū" : "uu",
  "v" : "v",
  "y" : "y"
};

// http://www.enjoyxstudy.com/javascript/suggest/index.en.html
// http://www.phpied.com/3-ways-to-define-a-javascript-class/

var Key = {
  TAB:     9,
  RETURN: 13,
  ESC:    27,
  UP:     38,
  DOWN:   40
};

var Suggest = function() {
  this.initialize.apply(this, arguments);
};

Suggest.prototype = {
  initialize: function(inputId, suggestId) {
    //console.log(inputId);
    //console.log(suggestId);
    this.input = document.getElementById(inputId);
    this.suggestDiv = document.getElementById(suggestId);

    // http://stackoverflow.com/questions/5597060/detecting-arrow-keys-in-javascript
    // http://www.quirksmode.org/js/keys.html
    // http://unixpapa.com/js/key.html
    var _this = this;
    this._addEventListener(this.input, 'keydown', function(e){_this.keyEvent(e);});

    this._addEventListener(this.input, 'focus', function(){_this.checkInput();})
    this._addEventListener(this.input, 'blur', function(){_this.stopCheckInput();})
  },

  prefixMatchedArray : [],
  prefixMatchedWordMaxCount : 25,
  suggestedWordPosition : null,
  suggestedWordListSize : null,
  checkInputTimingEventVar : null,
  checkInputEventInterval : 500,//ms
  originalUserPaliInput : "",
  oldInput : "",

  checkInput:function() {
  /* check user input periodically (oninput or onpropertychange is not usable because browser incompatibility) */
    if (this.input.value != this.oldInput) {
      if (this.suggestedWordPosition == null) {
        this.match();
      }
      this.oldInput = this.input.value;
    }
    var _this = this;
    this.checkInputTimingEventVar = setTimeout(function(){_this.checkInput();}, this.checkInputEventInterval);
  },

  stopCheckInput:function() {
    clearTimeout(this.checkInputTimingEventVar);
    this.flush();
  },

  match:function() {
    // remove whitespace in the beginning and end of the string
    var userInputStr = this.input.value.replace(/(^\s+)|(\s+$)/g, "");

/*
  keyword: javascript string prefix match
  http://stackoverflow.com/questions/457160/the-most-efficient-algorithm-to-find-first-prefix-match-from-a-sorted-string-arr
*/
    /* TODO: should we convert the string to lower case here? */

    /* Here we give simple implementation for prefix matching */
    if (userInputStr.length == 0){
      document.getElementById("result").innerHTML = "";//FIXME: bad practice
      this.flush();
      return;
    }

    //if the first letter in user input string is invalid, return
    if (!prefix_code[userInputStr[0]]) {
      document.getElementById("result").innerHTML = '无此字';//FIXME: bad practice
      return;
    }

    var arrayName = "prefix_" + prefix_code[userInputStr[0]];

    var matched_count = 0;
    var matched_array = new Array();//FIXME: use prefixMatchedArray
    /* keyword: javascript evaluate string as variable
       in this case, eval(arrayName) */
    for (var i=0; i < eval(arrayName).length; i++ ) {
      if (eval(arrayName)[i].indexOf(userInputStr) == 0) {// If the Pali word starts with user input string
        matched_array.push(eval(arrayName)[i]);
        matched_count += 1;
      }
      if (matched_count == this.prefixMatchedWordMaxCount) {break;}
    }
    /* http://www.javascriptkit.com/javatutors/arraysort.shtml */
    /* http://www.w3schools.com/jsref/jsref_sort.asp */
    matched_array.sort();
    this.updateSuggestion(matched_array, userInputStr);
  },

  keyEvent:function(event) {
    if (!this.checkInputTimingEventVar) {
      // Google Search Keyword: javascript object settimeout
      var _this = this;
      this.checkInputTimingEventVar = setTimeout(function(){_this.checkInput();}, this.checkInputEventInterval);
    }

    if (this.suggestedWordListSize == null) {return;}
    var code = this.getKeyCode(event);
    if (code == Key.UP) {
      if (this.suggestedWordPosition == null) {
        this.suggestedWordPosition = this.suggestedWordListSize;
        var currentWord = document.getElementById("suggestedWord"+this.suggestedWordPosition);
        currentWord.style.background = "#00C";
        currentWord.style.color = "white";
        this.input.value = currentWord.title;
      } else if (this.suggestedWordPosition == 1) {
        var currentWord = document.getElementById("suggestedWord"+this.suggestedWordPosition);
        this.suggestedWordPosition = null;
        currentWord.style.background = "";
        currentWord.style.color = "";
        this.input.value = this.originalUserPaliInput;
      } else {
        var previousWord = document.getElementById("suggestedWord"+this.suggestedWordPosition);
        previousWord.style.background = "";
        previousWord.style.color = "";
        this.suggestedWordPosition -= 1;
        var currentWord = document.getElementById("suggestedWord"+this.suggestedWordPosition);
        currentWord.style.background = "#00C";
        currentWord.style.color = "white";
        this.input.value = currentWord.title;
      }
    }
    if (code == Key.DOWN) {
      if (this.suggestedWordPosition == null) {
        this.suggestedWordPosition = 1;
        var currentWord = document.getElementById("suggestedWord"+this.suggestedWordPosition);
        currentWord.style.background = "#00C";
        currentWord.style.color = "white";
        this.input.value = currentWord.title;
      } else if (this.suggestedWordPosition == this.suggestedWordListSize) {
        var currentWord = document.getElementById("suggestedWord"+this.suggestedWordPosition);
        this.suggestedWordPosition = null;
        currentWord.style.background = "";
        currentWord.style.color = "";
        this.input.value = this.originalUserPaliInput;
      } else {
        var previousWord = document.getElementById("suggestedWord"+this.suggestedWordPosition);
        previousWord.style.background = "";
        previousWord.style.color = "";
        this.suggestedWordPosition += 1;
        var currentWord = document.getElementById("suggestedWord"+this.suggestedWordPosition);
        currentWord.style.background = "#00C";
        currentWord.style.color = "white";
        this.input.value = currentWord.title;
      }
    }
    if (code == Key.RETURN) {
      this.flush();
      this.oldInput = this.input.value;
    }
    if (code == Key.ESC) {
      this.input.value = this.originalUserPaliInput;
      this.flush();
    }
  },

  updateSuggestion:function(matchedArray, userInputStr) {
    this.suggestedWordPosition = null;
    this.suggestedWordListSize = matchedArray.length;
    this.originalUserPaliInput = userInputStr;
    /* create dropdown input suggestion menu */
    this.suggestDiv.innerHTML = "";
    for (var i=0; i<matchedArray.length; i++) {
      /* http://www.javascriptkit.com/javatutors/dom2.shtml */
      var word = document.createElement('span');
      word.id = ("suggestedWord" + (i+1));
      word.title = matchedArray[i];
      word.innerHTML = matchedArray[i].replace(userInputStr, "<b>" + userInputStr + "</b>");
      this.suggestDiv.appendChild(word);
      this.suggestDiv.innerHTML += '<br />';
    }
    this.suggestDiv.style.left = getOffset(document.getElementById('PaliInput')).left + "px";
    this.suggestDiv.style.textAlign = 'left';
    this.suggestDiv.style.fontFamily = 'Gentium Basic, arial, serif';
    this.suggestDiv.style.fontSize = '100%';
    this.suggestDiv.style.display = '';
  },

  flush: function() {
    this.suggestDiv.innerHTML = "";
    this.suggestDiv.style.display = "none";
    this.suggestedWordPosition = null;
    this.suggestedWordListSize = null;
    this.originalUserPaliInput = "";
    this.oldInput = "";
  },

  _addEventListener:function(e, evt, fn) {
    if (window.addEventListener) {
      e.addEventListener(evt, fn, false);
    } else {
      e.attachEvent('on'+evt, fn);
    }
  },

  getKeyCode : function(e) {
    if (!e) {e = window.event;}
    var keycode = e.keyCode || e.which;
    return keycode;
  },

  getKeyCodeChar : function(keycode) {
    return String.fromCharCode(keycode);
  }

};

function startSuggest() {Suggest = new Suggest("PaliInput", "suggest");}

window.addEventListener ?
  window.addEventListener('load', startSuggest, false) :
  window.attachEvent('onload', startSuggest);</script>
  <script type="text/javascript">

  var _gaq = _gaq || [];
  _gaq.push(['_setAccount', 'UA-32179549-1']);
  _gaq.push(['_trackPageview']);

  (function() {
    var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
    ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
    var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
  })();

</script>
</head> 
<body OnLoad="document.getElementById('PaliInput').focus();">
  <table class="floating-menu" style="top:0px; left:0px"><tr style="word-spacing: 15px; width: 100%; height: 100%;">
 <td style="padding-left:20px; text-align:left;">
  <a href="/?locale=zh_CN">首页</a>
  <a href="javascript:showAbout();">关于</a>
  <a href="javascript:showLink();">连结</a>
 </td>
 <td style="padding-right: 20px; text-align: right;">
  <a id="lang-dropdown" href="/" onclick="return false;" style="text-decoration:none; color: #00C; font-size:small; cursor:pointer; ">
   <span style="text-decoration:underline">中文(简体)</span><span style="font-size:.75em;">&#9660;</span>
  </a>
  <!-- http://www.mountaindragon.com/html/redirectjs2.htm  -->
  <select onChange="window.location=this.options[this.selectedIndex].value;">
   <option value="/" selected="selected">选择站点:</option>
   <option value="http://palidictionary.appspot.com/">主站</option>
   <option value="http://siongui.pythonanywhere.com/">备用站一</option>
   <option value="http://siongui.webfactional.com">备用站二</option>
  </select>
  <!--
  <div id="google_translate_element"></div><script>
function googleTranslateElementInit() {
  new google.translate.TranslateElement({
    pageLanguage: 'en',
    multilanguagePage: true,
    gaTrack: true,
    gaId: 'UA-32179549-1',
    layout: google.translate.TranslateElement.InlineLayout.SIMPLE
  }, 'google_translate_element');
}
</script><script src="//translate.google.com/translate_a/element.js?cb=googleTranslateElementInit"></script>
  -->
 </td>
</table>
<div class="menuDiv instance0" id="menuDiv-lang-dropdown" style="position: absolute; display: none; width: 95px; ">
<div style="margin-top: 4px;">
 <a class="menuItem" style="display: block; " href="/">English</a>
 <a class="menuItem" style="display: block; " href="/?locale=zh_CN">中文 (简体)</a>
 <a class="menuItem" style="display: block; " href="/?locale=zh_TW">中文 (繁體)</a>
</div></div>
  <table class="curvedEdges" style="width: 78%; margin-left:11%; margin-right:11%; margin-top:32px; height:600px; cellspacing: 0px;">
  <tr style="height: 50px; background-color: #fff4c8;">
    <td colspan="2"><h1 style="color:olive; text-align: center;">巴利语字典</h1></td>
  </tr>

  <tr>
    <td style="border-bottom:1px dotted black; padding:10px; height: 50px; text-align: left;"><script type="text/javascript"><!--
google_ad_client = "ca-pub-0436733829999264";
/* 上方橫幅 */
google_ad_slot = "1134049895";
google_ad_width = 320;
google_ad_height = 50;
//-->
</script>
<script type="text/javascript"
src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script></td>
    <td rowspan="2" style="vertical-align: top; padding-top:10px; width: 160px;"><script type="text/javascript"><!--
google_ad_client = "ca-pub-0436733829999264";
/* 右方直條 */
google_ad_slot = "8422986659";
google_ad_width = 160;
google_ad_height = 600;
//-->
</script>
<script type="text/javascript"
src="http://pagead2.googlesyndication.com/pagead/show_ads.js">
</script></td>
  </tr>

  <tr>
    <td style="vertical-align: top; text-align: left;">

      <br /><br />
      <!-- input pāli word -->
      <form action="javascript:lookup();" style="text-align: center;" autocomplete="off">
        <div>
          <input id="PaliInput" type="text" name="word" value="" />
          <input type="submit" value="Search" /><sub><a id="displayText" href="javascript:toggle();">显示巴利语键盘</a></sub>
          <div id="suggest" style="display:none;"></div>
        </div>
      </form>
      <div id="keyboard"> 

<div id="row1">
<input name="q" type="button" value="q" />
<input name="w" type="button" value="w" />
<input name="e" type="button" value="e" />
<input name="r" type="button" value="r" />
<input name="t" type="button" value="t" />
<input name="y" type="button" value="y" />
<input name="u" type="button" value="u" />
<input name="i" type="button" value="i" />
<input name="o" type="button" value="o" />
<input name="p" type="button" value="p" />
</div>

<div id="row2">
<input name="a" type="button" value="a" />
<input name="s" type="button" value="s" />
<input name="d" type="button" value="d" />
<input name="f" type="button" value="f" />
<input name="g" type="button" value="g" />
<input name="h" type="button" value="h" />
<input name="j" type="button" value="j" />
<input name="k" type="button" value="k" />
<input name="l" type="button" value="l" />
</div>
 
<div id="row3">
<input name="z" type="button" value="z" />
<input name="x" type="button" value="x" />
<input name="c" type="button" value="c" />
<input name="v" type="button" value="v" />
<input name="b" type="button" value="b" />
<input name="n" type="button" value="n" />
<input name="m" type="button" value="m" />
</div>
 
<div id="row4">
<input name="ā" type="button" value="ā" />
<input name="ḍ" type="button" value="ḍ" />
<input name="ī" type="button" value="ī" />
<input name="ḷ" type="button" value="ḷ" />
<input name="ṃ" type="button" value="ṃ" />
<input name="ñ" type="button" value="ñ" />
<input name="ṇ" type="button" value="ṇ" />
<input name="ṭ" type="button" value="ṭ" />
<input name="ū" type="button" value="ū" />
<input name="ŋ" type="button" value="ŋ" />
<input name="ṅ" type="button" value="ṅ" />
</div>

</div>
      <br /><br />
      <div id="result" style="text-align: center; font-family: Gentium Basic, arial, serif;"></div>
    </td>
  </tr>
  </table>
<div id="about" style="display:none"><br /><br />
<div style="padding-left: 30px; padding-right: 30px;">
字典来自 <a href="http://online-dhamma.net/anicca/pali-course/Pali-Chinese-English%20Dictionary.html">巴利语-汉语-英语 字典</a>. 版本是 "Pali Dict Linux Web Ver 1.0". 本站仍在开发中 所以可能会遭遇错误. 如果有任何问题或建议, 请 <a href="mailto:siongui@gmail.com">联络我</a>.
</div>
</div>

<div id="link" style="display:none"><br /><br />
<div style="padding-left: 30px; padding-right: 30px; text-align: left;">
巴利语字典:<br />
<a href="http://dsal.uchicago.edu/dictionaries/pali/">The Pali Text Society's Pali-English dictionary</a><br />
<a href="http://pali.hum.ku.dk/cpd/search.html">Critical Pali Dictionary</a><br />
<a href="http://www.dicts.info/dictionary.php?l1=english&amp;l2=pali">English to Pali dictionary</a><br />
<a href="http://www.budsas.org/ebud/dict-ep/index.htm">English-Pali Dict - Metta Net</a><br />
<br />
<a href="http://en.wikipedia.org/wiki/P%C4%81li_Canon">巴利语经典</a>:<br />
<a href="http://www.bodhgayanews.net/pali.htm">三藏</a> (斯里兰卡版本)<br />
<a href="http://www.84000.org/">三藏</a> (泰国版本)<br />
<a href="http://studies.worldtipitaka.org/">三藏</a> (缅甸版本)<br />
<br />
有关佛教的连结:<br />
<a href="http://www.theravadacn.org/DhammaIndex2.htm">覺醒之翼</a><br />
<a href="http://www.wpp-branches.net/cn/index.php">巴蓬寺分院</a><br />
<a href="http://www.dhamma.net.cn/">覺悟之路</a><br />
<br />
原始码 : <a href="https://code.google.com/p/pali/">pali</a> Google Code专桉<br />
字典 : 从 "Pali Dict Linux Web Ver 1.0" 在 <a href="http://online-dhamma.net/anicca/pali-course/Pali-Chinese-English%20Dictionary.html">巴利语-汉语-英语 字典</a>
</div>
</div>
</body>
</html>